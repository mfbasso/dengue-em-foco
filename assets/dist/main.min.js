function onSignIn(e){var o=e.getBasicProfile();localStorage.setItem("userName",o.getName()),localStorage.setItem("userPhoto",o.getImageUrl()),localStorage.setItem("userEmail",o.getEmail())}function signOut(){var e=gapi.auth2.getAuthInstance();e.disconnect().then(function(){console.log("User signed out.")})}function checkLoginState(){FB.login(function(e){e.authResponse&&testAPI()},{scope:"email, publish_actions,user_photos"})}function testAPI(){console.log("Welcome!  Fetching your information.... "),FB.api("/me",function(e){$.ajax({type:"POST",url:"http://localhost/dengue-em-foco/index.php/pages/login/autenticar",data:{userName:e.name,userPhoto:"http://graph.facebook.com/"+e.id+"/picture",userEmail:e.email}}).done(function(e){e?window.location.href="http://localhost/dengue-em-foco/index.php/pages/view/mapa":window.location.href="http://localhost/dengue-em-foco/index.php/pages/view/"})})}function logout(){FB.logout(function(e){})}window.fbAsyncInit=function(){FB.init({appId:"803156286438464",cookie:!0,xfbml:!0,version:"v2.2"}),FB.getLoginStatus(function(e){statusChangeCallback(e)})},function(e,o,t){var n,a=e.getElementsByTagName(o)[0];e.getElementById(t)||(n=e.createElement(o),n.id=t,n.src="//connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(n,a))}(document,"script","facebook-jssdk");var user={userName:localStorage.getItem("userName"),userEmail:localStorage.getItem("userEmail"),userPhoto:localStorage.getItem("userPhoto")};$.ajax({type:"POST",url:"http://localhost/dengue-em-foco/login/oauth",dataType:"json",data:{user:JSON.stringify(user)},success:function(e){console.log("success"+e),window.location.href="http://localhost/dengue-em-foco/pages/view/mapa"},error:function(e,o,t){alert("Erro! "+o+" "+t)}});